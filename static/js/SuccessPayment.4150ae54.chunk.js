"use strict";(self.webpackChunkreact_project_3=self.webpackChunkreact_project_3||[]).push([[225],{1100:function(e,r,t){t.r(r),t.d(r,{default:function(){return p}});var n=t(2791),a=t(7689),o=t(1087),s="SuccessPaymentBlock_root__DUXxU";var c=t.p+"static/media/cart_happy_face_emoji_emotion_smile_icon.26154ae7e18e97d5885985982ac8ea1a.svg";function i(e,r){return Math.floor(Math.random()*(r-e)+e)}var u=function(e,r){return"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())]+i(e,r).toString()+i(e,r).toString()+i(e,r).toString()},l=t(1210),d=t(9434),m=t(6707),f=t(9085),h=t(2409),g=t(4371),v=t(184),S=function(){var e=(0,d.I0)(),r=(0,d.v9)(f.K).totalPrice,t=(0,a.TH)().pathname,i=(0,g.a)().isAuth,S=(0,a.s0)(),p=(0,n.useRef)(u(1,100)),j=(0,n.useRef)("true"===localStorage.getItem("didMount")),x=(0,n.useRef)(Math.round(r/100));(0,n.useEffect)((function(){var n=new Date,a=n.toLocaleDateString("en-GB"),o=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if("/success_payment"===t)if(j.current)localStorage.removeItem("didMount"),S("/");else{if(e((0,m.H5)()),i){var s=JSON.parse(localStorage.getItem("currentUser"));s.bonus+=x.current;var c={date:a,time:o,numberOfOrder:p.current,totalPrice:r,bonusForOrder:x.current,items:s.cart};s.cart=[],s.orders.push(c),localStorage.setItem("currentUser",JSON.stringify(s)),localStorage.removeItem("bonus");var u=s.email,l=JSON.parse(localStorage.getItem("users")).map((function(r){return r.email===u&&(r.bonus=s.bonus,e((0,h.v_)(s.bonus)),r.cart=[],r.orders.push(c)),r}));localStorage.setItem("users",JSON.stringify(l))}else localStorage.removeItem("cart");j.current=!0,localStorage.setItem("didMount","true")}}),[]);return(0,v.jsxs)("h2",{className:s,children:[(0,v.jsx)("div",{children:(0,v.jsx)("img",{src:c,alt:"smile_face"})}),(0,v.jsx)("div",{children:"\u0423\u0440\u0430! \u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),(0,v.jsxs)("div",{children:["\u041d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",(0,v.jsx)("span",{children:p.current})]}),i&&(0,v.jsxs)("div",{children:["\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0431\u043e\u043d\u0443\u0441\u043e\u0432 \u0437\u0430 \u0437\u0430\u043a\u0430\u0437: ",(0,v.jsx)("span",{children:x.current})]}),(0,v.jsx)("div",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0443\u0436\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c!"}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{children:"\u041f\u0440\u0438\u044f\u0442\u043d\u043e\u0433\u043e \u0430\u043f\u043f\u0435\u0442\u0438\u0442\u0430!"})}),(0,v.jsx)(o.rU,{to:"/",children:(0,v.jsx)(l.Z,{onRemoveDidMount:function(){localStorage.removeItem("didMount")}})})]})},p=function(){return(0,v.jsx)(S,{})}}}]);
//# sourceMappingURL=SuccessPayment.4150ae54.chunk.js.map