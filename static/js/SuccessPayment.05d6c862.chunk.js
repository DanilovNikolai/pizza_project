"use strict";(self.webpackChunkreact_project_3=self.webpackChunkreact_project_3||[]).push([[225],{1100:function(e,r,t){t.r(r),t.d(r,{default:function(){return p}});var n=t(2791),a=t(9439),s=t(7689),o=t(1087),c="SuccessPaymentBlock_root__DUXxU";var i=t.p+"static/media/cart_happy_face_emoji_emotion_smile_icon.26154ae7e18e97d5885985982ac8ea1a.svg";function l(e,r){return Math.floor(Math.random()*(r-e)+e)}var u=function(e,r){return"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())]+l(e,r).toString()+l(e,r).toString()+l(e,r).toString()},f=t(1210),d=t(9434),m=t(7891),h=t(9085),g=t(4371),v=t(184),S=function(){var e=u(1,100),r=(0,d.I0)(),t=(0,d.v9)(h.K).totalPrice,l=(0,s.TH)().pathname,S=(0,g.a)().isAuth,p=(0,n.useState)((function(){var e=localStorage.getItem("coinsForOrder");return e?parseInt(e,10):0})),j=(0,a.Z)(p,2),x=j[0],_=j[1],I=(0,s.s0)(),y=(0,n.useState)(!1),w=(0,a.Z)(y,2),M=w[0],O=w[1];(0,n.useEffect)((function(){console.log("render");var e=localStorage.getItem("wasManuallyRefreshed");if("/success_payment"===l)if("true"===e)O(!0),I("/");else{if(r((0,m.H5)()),S){console.log("\u0440\u0435\u043d\u0434\u0435\u0440 \u0431\u043e\u043d\u0443\u0441\u043e\u0432"),console.log(x);var n=JSON.parse(localStorage.getItem("currentUser"));_((function(){var e=Math.round(t/100);return localStorage.setItem("coinsForOrder",JSON.stringify(e)),e})),n.coins+=Math.round(t/100),n.cart=[],localStorage.setItem("currentUser",JSON.stringify(n));var a=n.email,s=JSON.parse(localStorage.getItem("users")).map((function(e){return e.email===a&&(e.cart=[]),e}));localStorage.setItem("users",JSON.stringify(s))}else localStorage.removeItem("cart");localStorage.removeItem("wasManuallyRefreshed"),O(!0)}}),[]),(0,n.useEffect)((function(){M&&"/success_payment"===l&&I("/")}),[M,l,I]);var k=function(){localStorage.setItem("wasManuallyRefreshed","true")};return(0,n.useEffect)((function(){return window.addEventListener("beforeunload",k),function(){window.removeEventListener("beforeunload",k)}}),[]),(0,v.jsxs)("h2",{className:c,children:[(0,v.jsx)("div",{children:(0,v.jsx)("img",{src:i,alt:"smile_face"})}),(0,v.jsx)("div",{children:"\u0423\u0440\u0430! \u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),(0,v.jsxs)("div",{children:["\u041d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 ",(0,v.jsxs)("span",{children:["#",e]})]}),(0,v.jsxs)("div",{children:["\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043c\u043e\u043d\u0435\u0442: ",(0,v.jsx)("span",{children:x})]}),(0,v.jsx)("div",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0443\u0436\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c!"}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{children:"\u041f\u0440\u0438\u044f\u0442\u043d\u043e\u0433\u043e \u0430\u043f\u043f\u0435\u0442\u0438\u0442\u0430!"})}),(0,v.jsx)(o.rU,{to:"/",children:(0,v.jsx)(f.Z,{})})]})},p=function(){return(0,v.jsx)(S,{})}}}]);
//# sourceMappingURL=SuccessPayment.05d6c862.chunk.js.map